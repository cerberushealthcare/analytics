<?php
require_once 'inc/requireLogin.php';
require_once 'php/data/rec/sql/Users_Admin.php';
require_once 'php/data/rec/sql/UserLoginReqs.php';
require_once 'php/data/rec/sql/UserLogin.php';
require_once 'php/data/rec/sql/UserStub.php';
require_once 'php/data/rec/sql/Messaging.php';
require_once 'php/data/rec/sql/Clients.php';
require_once 'php/data/rec/sql/Meds.php';
require_once 'php/data/rec/sql/Diagnoses.php';
require_once 'php/data/rec/sql/Procedures.php';
require_once 'php/data/rec/sql/Procedures_Hm.php';
require_once 'php/data/rec/sql/Providers.php';
require_once 'php/data/rec/sql/Reporting.php';
require_once 'php/data/rec/sql/Scanning.php';
require_once 'php/data/rec/sql/UserGroups.php';
require_once 'php/data/rec/sql/LookupScheduling.php';
require_once 'php/data/rec/sql/LookupAreas.php';
require_once 'php/data/rec/sql/Documentation.php';
require_once 'php/data/rec/sql/IProcCodes_Admin.php';
require_once 'php/data/rec/sql/Procedures_Admin.php';
require_once 'php/data/rec/sql/IcdCodes.php';
require_once 'php/data/rec/sql/DrugClasses_Admin.php';
require_once 'php/data/rec/sql/PortalUsers.php';
require_once 'php/data/rec/sql/Templates_Map.php';
require_once 'php/data/rec/sql/LookupTemplates.php';
require_once 'php/data/rec/sql/LookupTemplates.php';
require_once 'php/data/rec/sql/Data_Medhx.php';
require_once 'php/data/rec/sql/UserRoles.php';
require_once 'php/data/csv/report-download/ReportCsvFile.php';
require_once 'php/data/xml/ClinicalXmls.php';
require_once 'php/data/rec/sql/CmsReports.php';
require_once 'php/data/xml/pqri/PQRI.php';
//
?>
<html>
  <head>
    <script language="JavaScript1.2" src="js/ui.js"></script>
    <script language="JavaScript1.2" src="js/_ui/Templates.js"></script>
  </head>
  <body>
<?php 
switch ($_GET['t']) {
  case '1':
    $text = 'renovascular hypertension';
    $text = 'abdominal pain';
    $text = 'edema';
    $text = 'coronary artery disease';
    $text = '384.1';
    $r = IcdCodes::search($text);
    print_r($r);
    break;
  case '2':
    $search = new SearchText('abdominal pain pain');
    print_r($search);
    $expr = $search->expr; 
    $pattern = "/" . $expr . "/i";
    $text = 'He has some serious abdominal pain going on with pain in his abdominal region.';
    //print_r($search->matchDistinct($text));
    print_r(jsondecode(jsonencode($search)));
    break;
  case '3':
    $user = UserLogin::fetch(46);
    print_r($user);
    if ($user->isPrimaryDoc()) 
      echo 'yep';
    break;
  case '4':
    $reqs = UserLoginReqs::getAllFor(1);
    print_r($reqs);
    break;
  case '5':
    $reqs = LoginReq::fetchAllActive();
    print_r($reqs);
    break;
  case '6':
    print_r(Messaging::getListsAsJson());
    break;
  case '7':
    print_r(Messaging::getMyUnreadCt());
    break;
  case '8':
    $dm = DataImmun::fetchForFacesheet('1656');
    $j = jsonencode($dm);
    print_r(jsondecode($j));
    break;
  case '9':
    $dm = DataImmun::fetchForFacesheet('1656');
    $d = $dm[0];
    print_r($d);
    $j = jsonencode($d);
    $j = jsondecode($j);
    print_r($j);
    $j->_dateGiven = 'Nov 1970';
    print_r($j);
    $d = DataImmun::fromJsonObject($j);
    print_r($d);
    break;
  case '10':
    $o = jsondecode('{"dataImmunId":1}');
    $d = new DataImmun($o);
    break;
  case '11':
    $c = Client::fetchWithDemo(1664);
    $j = jsonencode($c);
    print_r(jsondecode($j));
    break;
  case '12':
    $r = TrackItems::getOpen(1666);
    print_r($r);
    break;
  case '13':
    $s = '2010-11-23 16:00:01';
    $x = formatDateTime($s);
    print_r($x);
    print_r('<br>');
    $s = formatFromDateTime($x);
    print_r($s);
    print_r('<br>');
    $s = formatFromDateTime('2010-11-23');
    print_r($s);
    break;
  case '14':
    $u = new UserReport();
    $u->active = 1;
    $u->userType = 1;
    $u->subscription = 0;
    $users = SqlRec::fetchAllBy($u);
    foreach ($users as $user) {
      $user->AddressGroup = AddressReport::fetchByTable('G', $user->userGroupId, 0);
      $user->UsageYTD = UsageDetails::getUsageYTD($user->userId);
    }
    print_r($users);
    break;
  case '15':
    $user = UserReport::fetch($_GET['id']);
    $user->AddressGroup = AddressReport::fetchByTable('G', $user->userGroupId, 0);
    print_r($user);
    break;
  case '16':
    $reqs = UserLoginReqs::getAll();
    print_r($reqs);
    break;
  case '17':
    $o = '{"clientId":"1687","userGroupId":"1","uid":"234234","lastName":"Foot","firstName":"Big","sex":"F","birth":"09-Nov-1955","dateCreated":"2010-01-30 23:06:42","active":"1","notes":"ewrwer","dateUpdated":"2011-03-02 12:49:07","Address_Home":{"addressId":"4656","tableCode":"C","tableId":"1687","type":"0","addr1":"500 Main","city":"Lexington","state":"KY","zip":"40207","phone1":"502 999-1212","phone1Type":"1","csz":"Lexington, KY 40207"},"Address_Emergency":{"tableCode":"C","tableId":"1687","type":"2","csz":""},"Address_Spouse":{"tableCode":"C","tableId":"1687","type":"3","csz":""},"Address_Father":{"tableCode":"C","tableId":"1687","type":"6","csz":""},"Address_Mother":{"tableCode":"C","tableId":"1687","type":"5","csz":""},"Address_Rx":{"tableCode":"C","tableId":"1687","type":"4","csz":""},"ICards":[{"clientId":"1687","seq":"1"},{"clientId":"1687","seq":"2","planName":"23423"}],"age":55,"ageYears":55,"name":"Foot, Big","icard":{"clientId":"1687","seq":"1"},"icard2":{"clientId":"1687","seq":"2","planName":"23423"},"middleName":""}';
    $obj = jsondecode($o);
    $client = new Client($obj);
    print_r($client);
    break;
  case '18':
    $s = '19950102';
    print_r(formatDate($s));
    exit;
    $recs = Clients::search('Hornsby', 'W');
    print_r($recs);
    break;
  case '20':
    $meds = Meds::getActive('1674');
    print_r($meds);
    break;
  case '21':
    $meds = Meds::getHistory('1663');
    $meds = jsondecode(jsonencode($meds));
    print_r($meds);
    break;
  case '22':
    $recs = Users_Admin::searchUsersByName('hornsby');
    echo Users_Admin::asHtmlTable($recs);
    break;
  case '23':
    $recs = Users_Admin::getCreatedCounts();
    echo Users_Admin::asHtmlTable($recs);
    break;
  case '24':
    $recs = Users_Admin::getUsersByCreateDate('2010-10-15');
    echo Users_Admin::asHtmlTable($recs);
    break;
  case '25':
    $recs = Users_Admin::getLoginsByUser(1);
    echo Users_Admin::asHtmlTable($recs);
    break;
  case '26':
    $recs = Users_Admin::getLoginsByIp('192.168.1.1');
    echo Users_Admin::asHtmlTable($recs);
    break;
  case '27':
    $cid = 1666;
    $recs = Proc::fetchAll($cid);
    p_r($recs);
    exit;
  case '28':
    $cid = 1666;
    $recs = Proc::fetchAll2($cid);
    p_r($recs);
    exit;
  case '29':
    $recs = TemplateOrderEntry::getWithQuestions();
    print_r($recs);
    break;
  case '30':
    $sql = IProcCodes_Build::buildSqlScript();
    print_r($sql);
    break;
  case '31':
    $rec = IProcCodes::getByName('AV Repair');
    print_r($rec);
    $rec = IProcCodes::getByName('AAA Repair');
    print_r($rec);
    break;
  case '32': 
    $recs = Providers::getAll();
    print_r($recs);
    break;
  case '33':
    $recs = Reporting::patientsByIcd('786.');
    print_r($recs);
    break;
  case '34':
    $recs = Reporting::patientsByAge(2, 15);
    $recs = Reporting::patientsByAge(0, 1);
    print_r($recs);
    break;
  case '35':
    $recs = Reporting::patientsByMed('al');
    print_r($recs);
    break;
  case '36':
    $recs = Reporting::patientsByLocation(null, 'l');
    print_r($recs);
    break;
  case '37':
    $recs = Reporting::patientsByResults(null, null, 14);
    print_r($recs);
    break;
  case '38':
    $recs = Scanning::getIndexedToday();
    print_r($recs);
    $rec = $recs[0];
    $j = jsonencode($rec);
    print_r($j);
    $o = jsondecode($j);
    $o->areas = array(7, 8);
    print_r($o);
    $index = new ScanIndex($o);
    print_r($index);
    break;
  case '39':
    $recs = Scanning::getUnindexedFiles();
    p_r($recs);
    exit;
  case '40':
    $recs = UserGroups::getDocsJsonList();
    print_r($recs);
    print_r('<br>');
    $first = UserGroups::getFirstDoc();
    print_r($first);
    break;
  case '41':
    $rec = Clients::get('1666');
    //print_r($rec);
    $r = jsondecode(jsonencode($rec));
    print_r($r);
    break;
  case '42':
    //$recs = Documentation::getAll(1687);
    //$recs = jsonencode($recs);
    //print_r($recs);
    $rec = '{"type":4,"id":"84","date":"05-Aug-2011","timestamp":"2011-08-05 14:04:50","name":"Infectious Disease Referral","_type":"Order"}';
    $rec = jsondecode($rec);
    $rec = Documentation::preview($rec);
    p_r($rec);
    break;
  case '43':
    $rec = LookupRec::getJsonLists(LookupScheduling::getApptTypes(), LookupScheduling::getStatuses(), LookupScheduling::getProfileFor(1));
    $rec = jsondecode($rec);
    print_r($rec);
    break;
  case '44':
    $rec = LookupScheduling::getProfileFor(1);
    print_r($rec);
    break;
  case '45':
    $rec = QuestionIpc::fetch('23008');
    print_r($rec);
    break;
  case '46':
    $ids = array(686265, 686278);
    $qid = 23008;
    IprocCodes_Admin::copyToQuestion($ids, $qid);
    $rec = QuestionIpc::fetch('23008');
    print_r($rec);
    break;
  case '47':
    $pis = JsonDao::getJParInfosByPid(2302);
    print_r(jsondecode($pis));
    break;
  case '48':
    $date = '2010E';
    echo date("Y-m-d", strtotime($date));
    exit;
  case '49':
    //$recs = DrugClasses_Admin::getAll();
    //print_r($recs);
    $recs = DrugClasses::getSubclassJsonList(69);
    p_r($recs);
    exit;
  case '50':
    $recs = Reporting::test1();
    print_r($recs);
    exit;
  case '51':
    $recs = Reporting::test2();
    print_r($recs);
    exit;
  case '52':
    $recs = Reporting::test3();
    print_r($recs);
    exit;
  case '53':
    $recs = Reporting::test4();
    print_r($recs);
    exit;
  case '54':
    $rec = Reporting::test0();
    $rec = jsonencode($rec);
    print_r($rec);
    exit;
  case '55':
    $rec = '{"name":"Patient Report","Rec":{"uid":{"fid":"Patient ID"},"lastName":{"fid":"Last Name"},"firstName":{"fid":"First Name"},"sex":{"fid":"Sex"},"birth":{"fid":"Age"},"deceased":{"fid":"Deceased"},"race":{"fid":"Race"},"ethnicity":{"fid":"Ethnicity"},"language":{"fid":"Language"},"Joins":[{"jt":"1","table":"Allergies","Recs":[{"agent":{"fid":"Agent"},"active":{"fid":"Active"},"Joins":null,"_class":"Allergy_Rep"}]}],"_class":"Client_Rep"},"Joins":null}';
    $rec = jsondecode($rec);
    Reporting::generate($rec);
    exit;
  case '56':
    $report = '{"reportId":"20","name":"A Test Report","comment":"This is a test","Rec":{"uid":null,"lastName":null,"firstName":null,"sex":{"op":"30","value":"M","text_":"Male"},"birth":null,"deceased":{"text_":"Yes"},"race":{"text_":"American Native\/Alaskan Native"},"ethnicity":{"text_":"Hispanic Origin"},"language":null,"Joins":[{"jt":"1","table":"5","Recs":[{"ipc":{"op":"30","value":"842651","text_":"AAA Repair"},"date":null,"cat":null,"providerId":null,"addrFacility":null,"location":null,"Joins":null,"table_":"5","pid_":null}]}],"table_":"0","pid_":null},"Joins":null,"_tableName":"Patients"}';
    $recs = Reporting::generate(jsondecode($report));
    print_r($recs);
    exit;
  case '60':
    $recs = PortalUsers::getAll();
    print_r($recs);
    exit;
  case '61':
    $rec = '{"clientId":"1666","uid":"bb","pw":"bb","cq1":"What is your name?","ca1":"bb","cq2":"What is your quest?","ca2":"holy grail","cq3":"What is your favorite color?","ca3":"blue"}';
    $rec = PortalUsers::create(jsondecode($rec));
    print_r($rec);
    exit;
  case '70':
    $rec = IProcCodes::getEmptyCriteria();
    p_r($rec);
    p_r(jsonencode($rec));
    exit;
  case '71':
    $rc = IpcHm::getStaticJson();
    p_r($rc);
    exit;
  case '72':
    $rc = IpcHm::fetchTopLevel(710127, 1);
    p_r($rc);
    $crit = $rc->getRepCrit_asNumerator();
    $recs = $crit->fetchAll(1);
    $crit = $rc->getRepCrit_asDenominator();
    $recs = $crit->fetchAll(1);
    p_r($recs, 'denom');
    exit;
  case '73':
    $rc = IpcHm::fetchTopLevel(710127, 1);
    p_r($rc);
    $crit = $rc->getRepCrit_asNumerator();
    p_r($crit);
    $recs = $crit->fetchAll(1);
    print_r($recs);
    exit;
  case '74':
    $rc = IpcHm::fetch(710127, 1);
    print_r($rc);
    $crit = $rc->getRepCrit_asDenominator();  // pooh bear
    print_r($crit);
    $recs = $crit->fetchAll(1);
    print_r($recs);
    exit;
  case '75':
    require_once 'php/data/rec/sql/Procedures_Hm.php';
    $rc = IpcHm::fetch(1, 710127);
    print_r($rc);
    $applicable = $rc->isApplicable(1, 1706);  // buddy holly
    p_r('applicable=' . $applicable);
    exit;
  case '80':
    p_();
    $t = Templates_Map::get(1, '2010-01-01 01:01:01');
    p_();
    //$t = jsonencode($t);
    p_r($t);
    exit;
  case '81':
    $t = JsonDao::oldbuildJDefaultMap(1);
    p_r($t);
    exit;
  case '82':
    $rec = LookupTemplates::get(1);
    p_r($rec);
    exit;
  case '83':
    $a = new stdClass();
    $a->fred = array('dum'=>12);
    $b = array();
    $b['fred'] = 'barney';
    p_r(getr_($a, 'fred.dum'), 'a');
    p_r(get_($b, 'fred2'), 'b');
    exit;
  case '84':
    $report = Reporting::generate(Reporting::getReport(37));
    $file = ReportCsvFile::from($report, $report->recs);
    $file->download();
    exit;
  case '90':
    $clients = IpcHm::fetchAllApplicableClients(710127, 1);
    p_r($clients);
    exit;
  case '91':
    $clients = IpcHm::fetchAllDueNowClients(710127, 1);
    p_r($clients);
    exit;
  case '92':
    $recs = IpcHm::fetchTopLevels(1, 3027);
    p_r($recs);
    exit;
  case '93':
    $recs = IProcCodes_Hm::getForClient(3027);
    p_r($recs);
    exit;
  case '100':
    $folder = UserFolder::open(1);
    exit;
  case '101':
    global $myLogin;
    $myLogin->toRecordCache('123', 'test');
  case '102':
    $cache = $myLogin->getRecordCache();
    p_r($cache);
    exit;
  case '103':
    $cache = $myLogin->getRecordCache();
    $cache->set('fred', 'barney');
    global $myLogin;
    $myLogin->save();
    p_r($cache);
    exit;
  case '104':
    p_r($myLogin->cache);
    SessionCache::set('fred', 'barney');
    p_r($myLogin->cache);
    break;
  case '105':
    p_r($myLogin->cache);
    p_r(Sessions::getTemplateJsonList(12));
    p_r($myLogin->cache);
    break;
  case '106':
    p_();
    for ($i = 0; $i < 60000; $i++) {
      LoginDao::authenticateUserGroupIdWithin('clients', 'client_id', 3027);
    }
    p_();
    exit;
  case '110':
    IcdCodes::search('obstructive pulmonary disease');
    exit;
  case '111':
    IcdCodes::search('coronary artery');
    exit;
  case '120':
    $rec = Medhx_Summary::fetch(1666);
    p_r($rec);
    exit;
  case '121':
    $rec = Medhx_Rec::fetchAll(1666);
    p_r($rec);
    exit;
  case '122':
    $recs = Data_Medhx::getAll(1666);
    p_r($recs);
    exit;
  case '130':
    $recs = IpcHm::fetchTopLevel(600010, 1);
    p_r($recs);
    exit;
  case '131':
    $recs = IpcHm::fetchAllApplicableClients(600010, 1);
    p_r($recs);
    exit;
  case '132':
    $recs = IpcHm_Client::fetchAll(1, 1687);  // big foot
    p_r($recs);
    exit;
  case '133':
    $recs = Procedures_Hm::getForClient(1687);  
    p_r($recs);
    exit;
  case '134':
    $recs = Procedures_Hm::getForClient(1272);  // pooh
    p_r($recs);
    exit;
  case '135':
    $recs = Procedures_Hm::getForClient(1666);  // buff
    p_r(jsondecode(jsonencode($recs)));
    exit;
  case '136':
    Procedures_Admin::saveSmokingHxRecorded(1666);
    exit;
  case '140':
    $role = PrimaryRole::asProvider('Admin');
    p_r($role);
    exit;
  case '141':
    $text= <<<eos
MSH|^~\&||Amazing Clinical^24D0404292^CLIA|MIDOH|MI|201107280941||ORU^R01|20080320031629921238|P|2.3.1
PID|||246^^^^^Columbia Valley Memorial Hospital&01D0355944&CLIA~95101100001^^^^^MediLabCo-Seattle&45D0470381&CLIA||sara^blaunt^Q^Jr|Clemmons|19900602|F||W|2166WellsDr^AptB^Seattle^WA^98109||^^^^^206^6793240|||M|||423523049||U|N
PV1|1||||||9999^Account^Test^^^^^PHYID||||||||U||||||||||||||||||||||||
ORC|RE||||P
OBR|1||SER122145|^^^78334^Chemistry, serum sodium^meq/l|||201107280941||||||||BLDV|^Welby^M^J^Jr^Dr^MD|^WPN^PH^^^206^4884144||||||||F
OBX|1|NM|2951-2^SODIUM,SERUM^LN^230-007^Na&CLIA|1|141|meq/l|135-146||||F|||||^Doe^John|||||||Oakton Crest Laboratories|5570 Eden Street^^Oakland^California^94607|8006315250|
OBR|2||SER122145|^^^27760-3^POTASSIUM,SERUM^LN^230-006^K^CLIA|1|4.5|meq/l|3.4-5.3|||201107280941
OBX|2|NM|22760-3^POTASSIUM,SERUM^LN^230-006^K^CLIA|1|4.5|meq/l|3.4-5.3|N|||F|||||^Doe^John|||||||Oakton Crest Laboratories|5570 Eden Street^^Oakland^California^94607|8006315250|||201107280941
eos;
    $pass = 'hogjaws';
    $c = new cryptastic();
    $key = getEncryptKey($c, $pass, true);
    $encrypt = $c->encrypt($text, $key);
    p_r($encrypt);
    $c = new cryptastic();
    $key = getEncryptKey($c, $pass, true);
    $decrypt = $c->decrypt($encrypt, $key);
    p_r($decrypt);
    exit;
  case '150':
    $xml= <<<eos
<ContinuityOfCareRecord xmlns='urn:astm-org:CCR'>
  <CCRDocumentObjectID>Doc</CCRDocumentObjectID>
  <Language><Text>English</Text></Language>
  <Version>V1.0</Version>
  <DateTime><ExactDateTime>2008</ExactDateTime></DateTime>
  <Patient><ActorID>Patient</ActorID></Patient>
  <Body>
    <Problems>
      <Problem>
        <DateTime>
          <Type>
            <Text>Start date</Text>
          </Type>
          <ExactDateTime>2007-04-04T07:00:00Z</ExactDateTime>
        </DateTime>
        <DateTime>
          <Type>
            <Text>Stop date</Text>
          </Type>
          <ExactDateTime>2008-07-20T07:00:00Z</ExactDateTime>
        </DateTime>
        <Description>
          <Code>
            <Value>346.80</Value>
            <CodingSystem>ICD9</CodingSystem>
            <Version>2004</Version>
          </Code>
        </Description>
        <Status><Text>Active</Text></Status>
        <Source>
          <Actor>
            <ActorID>Harris Smith</ActorID>
            <ActorRole>
              <Text>Treating clinician</Text>
            </ActorRole>
          </Actor>
        </Source>
      </Problem>
    </Problems>
    <Medications>
      <Medication>
        <Product>
          <ProductName>
            <Code>
              <Value>49884058401</Value>
              <CodingSystem>NDC</CodingSystem>
            </Code>
          </ProductName>
          <Strength><Value>160</Value><Units><Unit>MG</Unit></Units></Strength>
          <Form><Text>Tablet</Text></Form>
        </Product>
        <Directions>
          <Direction><Route><Text>Oral</Text></Route><Dose><Value>2</Value></Dose><Frequency><Value>1 time per day</Value></Frequency></Direction>
        </Directions>
        <Refills>
          <Refill><Number>2</Number></Refill>
        </Refills>
        <FulfillmentHistory>
          <Fulfillment>
            <Quantity><Value>30</Value></Quantity>
            <DateTime>
              <Type>
                <Text>Dispense date</Text>
              </Type>
              <ExactDateTime>2008-06-22T07:00:00Z</ExactDateTime>
            </DateTime>
            <IDs>
              <Type>
                <Text>Prescription ID</Text>
              </Type>
              <ID>#92033859</ID>
            </IDs>
          </Fulfillment>
        </FulfillmentHistory>
        <DateTime>
          <Type>
            <Text>Prescription date</Text>
          </Type>
          <ExactDateTime>2008-06-21T07:00:00Z</ExactDateTime>
        </DateTime>
        <DateTime>
          <Type>
            <Text>Start date</Text>
          </Type>
          <ExactDateTime>2008-06-22T07:00:00Z</ExactDateTime>
        </DateTime>
        <DateTime>
          <Type>
            <Text>Stop date</Text>
          </Type>
          <ExactDateTime>2008-07-10T07:00:00Z</ExactDateTime>
        </DateTime>
        <Status><Text>ACTIVE</Text></Status>
        <Source>
          <Actor>
            <ActorID>Emily Smith</ActorID>
            <ActorRole>
              <Text>Prescribing clinician</Text>
            </ActorRole>
          </Actor>
        </Source>
      </Medication>
    </Medications>
    <Alerts>
      <Alert>
        <DateTime>
          <Type>
            <Text>Start date</Text>
          </Type>
          <ExactDateTime>2007-02-21T07:00:00Z</ExactDateTime>
        </DateTime>
        <DateTime>
          <Type>
            <Text>Stop date</Text>
          </Type>
          <ExactDateTime>2008-02-21T07:00:00Z</ExactDateTime>
        </DateTime>
        <Type><Text>Allergy</Text></Type>
        <Status>
          <Text>Active</Text>
        </Status>
        <Description>
          <Code>
            <Value>7101-6</Value>
            <CodingSystem>FDB</CodingSystem>
          </Code>
        </Description>
        <Source>
          <Actor>
            <ActorID>Bob Smith</ActorID>
            <ActorRole>
              <Text>Treating clinician</Text>
            </ActorRole>
          </Actor>
        </Source>
      </Alert>
    </Alerts>
    <Procedures>
      <Procedure>
        <DateTime>
          <Type><Text>Start date</Text></Type>
          <ExactDateTime>2007-04-04T07:00:00Z</ExactDateTime>
        </DateTime>
        <DateTime>
          <Type><Text>Stop date</Text></Type>
          <ExactDateTime>2007-04-05T07:00:00Z</ExactDateTime>
        </DateTime>
        <Description>
          <Code>
            <Value>41135</Value>
            <CodingSystem>CPT</CodingSystem>
          </Code>
        </Description>
        <Source>
          <Actor>
            <ActorID>Tom Smith</ActorID>
            <ActorRole>
              <Text>Treating clinician</Text>
            </ActorRole>
          </Actor>
        </Source>
      </Procedure>
    </Procedures>
    <Results>
      <Result>
        <Test>
          <DateTime>
            <Type>
              <Text>Collection start date</Text>
            </Type>
            <ExactDateTime>2007-02-21T07:00:00Z</ExactDateTime>
          </DateTime>
          <Description>
            <Code>
              <Value>2339-0</Value>
              <CodingSystem>LOINC</CodingSystem>
            </Code>
          </Description>
          <TestResult>
            <Value>98</Value>
            <Units>
              <Unit>K/uL</Unit>
            </Units>
          </TestResult>
          <NormalResult>
            <Normal>
              <Description>
                <Text>90 - 100</Text>
              </Description>
            </Normal>
          </NormalResult>
          <Source>
            <Actor>
              <ActorID>Jane Smith</ActorID>
              <ActorRole>
                <Text>Ordering clinician</Text>
              </ActorRole>
            </Actor>
          </Source>
        </Test>
      </Result>
    </Results>
    <Immunizations>
      <Immunization>
        <CCRDataObjectID>BB0022</CCRDataObjectID>
        <DateTime>
          <Type>
            <Text>Start date</Text>
          </Type>
          <ExactDateTime>1998-06-13T05:00:00Z</ExactDateTime>
        </DateTime>
        <Source>
          <Actor>
            <ActorID>Jane Smith</ActorID>
            <ActorRole>
              <Text>Ordering clinician</Text>
            </ActorRole>
          </Actor>
        </Source>
        <Product>
          <ProductName>
            <Code>
              <Value>90296</Value>
              <CodingSystem>CPT</CodingSystem>
            </Code>
          </ProductName>
        </Product>
      </Immunization>
    </Immunizations>
  </Body>
</ContinuityOfCareRecord>
eos;
    $xml = ClinicalXmls::parse($xml);
    p_r($xml);
    exit;
      case '151':
    $xml= <<<eos
<ContinuityOfCareRecord xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="urn:astm-org:CCR CCR_20051008_Final.xsd" xmlns="urn:astm-org:CCR">
  <CCRDocumentObjectID>632677807597605000</CCRDocumentObjectID>
  <Language>
    <Text>English</Text>
  </Language>
  <Version>V1.0</Version>
  <DateTime>
    <ExactDateTime>2005-11-16T23:32:39Z</ExactDateTime>
  </DateTime>
  <Patient>
    <ActorID>AA0001</ActorID>
  </Patient>
  <From>
    <ActorLink>
      <ActorID>AA0002</ActorID>
      <ActorRole>
        <Text>Primary Care Provider</Text>
      </ActorRole>
    </ActorLink>
    <ActorLink>
      <ActorID>AA0003</ActorID>
    </ActorLink>
    <ActorLink>
      <ActorID>AA0004</ActorID>
    </ActorLink>
  </From>
  <To>
    <ActorLink>
      <ActorID>AA0005</ActorID>
      <ActorRole>
        <Text>Consulting Provider</Text>
      </ActorRole>
    </ActorLink>
  </To>
  <Purpose>
    <Description>
      <Text>Request For Consult</Text>
    </Description>
    <Indications>
      <Indication>
        <Source />
        <InternalCCRLink>
          <LinkID>BB0006</LinkID>
        </InternalCCRLink>
      </Indication>
    </Indications>
  </Purpose>
  <Body>
    <Payers>
      <Payer>
        <CCRDataObjectID>BB0001</CCRDataObjectID>
        <IDs>
          <Type>
            <Text>Plan Code</Text>
          </Type>
          <ID>584</ID>
          <Source>
            <Actor>
              <ActorID>AA0002</ActorID>
            </Actor>
          </Source>
        </IDs>
        <IDs>
          <Type>
            <Text>Policy Number</Text>
          </Type>
          <ID>079087</ID>
          <Source>
            <Actor>
              <ActorID>AA0002</ActorID>
            </Actor>
          </Source>
        </IDs>
        <Type>
          <Text>Primary Health Insurance</Text>
        </Type>
        <Source>
          <Actor>
            <ActorID>AA0006</ActorID>
          </Actor>
        </Source>
        <PaymentProvider>
          <ActorID>AA0007</ActorID>
          <ActorRole>
            <Text>Payer</Text>
          </ActorRole>
        </PaymentProvider>
        <Subscriber>
          <ActorID>AA0008</ActorID>
        </Subscriber>
      </Payer>
      <Payer>
        <CCRDataObjectID>BB0002</CCRDataObjectID>
        <IDs>
          <Type>
            <Text>Policy Number</Text>
          </Type>
          <ID>N/A</ID>
          <Source>
            <Actor>
              <ActorID>AA0002</ActorID>
            </Actor>
          </Source>
        </IDs>
        <Type>
          <Text>Guarantor</Text>
        </Type>
        <Source>
          <Actor>
            <ActorID>AA0009</ActorID>
          </Actor>
        </Source>
        <PaymentProvider>
          <ActorID>AA0010</ActorID>
        </PaymentProvider>
      </Payer>
    </Payers>
    <AdvanceDirectives>
      <AdvanceDirective>
        <CCRDataObjectID>BB0003</CCRDataObjectID>
        <DateTime>
          <Type>
            <Text>Recorded Date</Text>
          </Type>
          <ExactDateTime>2005-07-01T04:00:00Z</ExactDateTime>
        </DateTime>
        <Type>
          <Text>CPR Status</Text>
        </Type>
        <Description>
          <Text>Cardioversion Only</Text>
        </Description>
        <Status>
          <Text>Current and Verified</Text>
        </Status>
        <Source>
          <Actor>
            <ActorID>AA0002</ActorID>
          </Actor>
        </Source>
      </AdvanceDirective>
      <AdvanceDirective>
        <CCRDataObjectID>BB0004</CCRDataObjectID>
        <DateTime>
          <Type>
            <Text>Recorded Date</Text>
          </Type>
          <ExactDateTime>2005-07-06T04:00:00Z</ExactDateTime>
        </DateTime>
        <Type>
          <Text>Antibiotic Status</Text>
        </Type>
        <Description>
          <Text>Antibiotics Only</Text>
        </Description>
        <Status>
          <Text>Current and Verified</Text>
        </Status>
        <Source>
          <Actor>
            <ActorID>AA0002</ActorID>
          </Actor>
        </Source>
      </AdvanceDirective>
    </AdvanceDirectives>
    <Support>
      <SupportProvider>
        <ActorID>AA0011</ActorID>
        <ActorRole>
          <Text>Durable Power of Attorney for Healthcare</Text>
        </ActorRole>
      </SupportProvider>
    </Support>
    <FunctionalStatus>
      <Function>
        <CCRDataObjectID>BB0005</CCRDataObjectID>
        <DateTime>
          <Type>
            <Text>Onset</Text>
          </Type>
          <ExactDateTime>2005-11-01T05:00:00Z</ExactDateTime>
        </DateTime>
        <Type>
          <Text>Mobility</Text>
        </Type>
        <Description>
          <Text>Limited</Text>
        </Description>
        <Status>
          <Text>
          </Text>
        </Status>
        <Source>
          <Actor>
            <ActorID>AA0002</ActorID>
          </Actor>
        </Source>
      </Function>
    </FunctionalStatus>
    <Problems>
      <Problem>
        <CCRDataObjectID>BB0006</CCRDataObjectID>
        <DateTime>
          <Type>
            <Text>Onset</Text>
          </Type>
          <ExactDateTime>1999-04-01T05:00:00Z</ExactDateTime>
        </DateTime>
        <Type>
          <Text>Diagnosis</Text>
        </Type>
        <Description>
          <Text>Congestive Heart Failure</Text>
          <Code>
            <Value>428.0</Value>
            <CodingSystem>ICD9-CM</CodingSystem>
            <Version>2005</Version>
          </Code>
        </Description>
        <Status>
          <Text>Active</Text>
        </Status>
        <Source>
          <Actor>
            <ActorID>AA0002</ActorID>
            <ActorRole>
              <Text>Treating clinician</Text>
            </ActorRole>
          </Actor>
        </Source>
      </Problem>
      <Problem>
        <CCRDataObjectID>BB0007</CCRDataObjectID>
        <DateTime>
          <Type>
            <Text>Onset</Text>
          </Type>
          <ExactDateTime>1984-03-01T05:00:00Z</ExactDateTime>
        </DateTime>
        <Type>
          <Text>Diagnosis</Text>
        </Type>
        <Description>
          <Text>Diabetes Mellitus</Text>
          <Code>
            <Value>250.02</Value>
            <CodingSystem>ICD9-CM</CodingSystem>
            <Version>2005</Version>
          </Code>
        </Description>
        <Status>
          <Text>Active</Text>
        </Status>
        <Source>
          <Actor>
            <ActorID>AA0002</ActorID>
          </Actor>
        </Source>
      </Problem>
      <Problem>
        <CCRDataObjectID>BB0008</CCRDataObjectID>
        <DateTime>
          <Type>
            <Text>Onset</Text>
          </Type>
          <ExactDateTime>1990-08-08T04:00:00Z</ExactDateTime>
        </DateTime>
        <Type>
          <Text>Diagnosis</Text>
        </Type>
        <Description>
          <Text>Hypertension</Text>
          <Code>
            <Value>403.10</Value>
            <CodingSystem>ICD9-CM</CodingSystem>
            <Version>2005</Version>
          </Code>
        </Description>
        <Status>
          <Text>Active</Text>
        </Status>
        <Source>
          <Actor>
            <ActorID>AA0002</ActorID>
          </Actor>
        </Source>
      </Problem>
      <Problem>
        <CCRDataObjectID>BB0009</CCRDataObjectID>
        <DateTime>
          <Type>
            <Text>Onset</Text>
          </Type>
          <ExactDateTime>2003-01-25T05:00:00Z</ExactDateTime>
        </DateTime>
        <Type>
          <Text>Diagnosis</Text>
        </Type>
        <Description>
          <Text>Myocardial Infarction</Text>
          <Code>
            <Value>410.80</Value>
            <CodingSystem>ICD9-CM</CodingSystem>
            <Version>2005</Version>
          </Code>
        </Description>
        <Status>
          <Text>Active</Text>
        </Status>
        <Source>
          <Actor>
            <ActorID>AA0002</ActorID>
          </Actor>
        </Source>
      </Problem>
    </Problems>
    <FamilyHistory>
      <FamilyProblemHistory>
        <CCRDataObjectID>BB0010</CCRDataObjectID>
        <DateTime>
          <Type>
            <Text>Onset</Text>
          </Type>
          <ExactDateTime>2005-09-24T04:00:00Z</ExactDateTime>
        </DateTime>
        <Status>
          <Text>Active</Text>
        </Status>
        <Source>
          <Actor>
            <ActorID>AA0006</ActorID>
          </Actor>
        </Source>
        <FamilyMember>
          <ActorID>AA0012</ActorID>
          <ActorRole>
            <Text>Mother</Text>
          </ActorRole>
          <HealthStatus>
            <DateTime>
              <Age>
                <Value>70</Value>
                <Units>
                  <Unit>Years</Unit>
                </Units>
              </Age>
            </DateTime>
            <Description>
              <Text>Ill</Text>
            </Description>
            <Source>
              <Actor>
                <ActorID>AA0006</ActorID>
              </Actor>
            </Source>
          </HealthStatus>
          <Source>
            <Actor>
              <ActorID>AA0002</ActorID>
            </Actor>
          </Source>
        </FamilyMember>
        <Problem>
          <Type>
            <Text>Problem</Text>
          </Type>
          <Description>
            <Text>ANEMIA UNSPECIFIED</Text>
            <Code>
              <Value>285.9</Value>
              <CodingSystem>ICD9-CM</CodingSystem>
              <Version>2005</Version>
            </Code>
          </Description>
          <Source>
            <Actor>
              <ActorID>AA0006</ActorID>
            </Actor>
          </Source>
        </Problem>
      </FamilyProblemHistory>
    </FamilyHistory>
    <SocialHistory>
      <SocialHistoryElement>
        <CCRDataObjectID>BB0011</CCRDataObjectID>
        <Type>
          <Text>Marital Status</Text>
        </Type>
        <Description>
          <Text>Married</Text>
        </Description>
        <Source>
          <Actor>
            <ActorID>AA0002</ActorID>
          </Actor>
        </Source>
      </SocialHistoryElement>
      <SocialHistoryElement>
        <CCRDataObjectID>BB0012</CCRDataObjectID>
        <Type>
          <Text>Language</Text>
        </Type>
        <Description>
          <Text>English</Text>
        </Description>
        <Source>
          <Actor>
            <ActorID>AA0002</ActorID>
          </Actor>
        </Source>
      </SocialHistoryElement>
      <SocialHistoryElement>
        <CCRDataObjectID>BB0013</CCRDataObjectID>
        <Type>
          <Text>Ethnicity</Text>
        </Type>
        <Description>
          <Text>Other</Text>
        </Description>
        <Source>
          <Actor>
            <ActorID>AA0002</ActorID>
          </Actor>
        </Source>
      </SocialHistoryElement>
      <SocialHistoryElement>
        <CCRDataObjectID>BB0014</CCRDataObjectID>
        <Type>
          <Text>Religious Preference</Text>
        </Type>
        <Description>
          <Text>Catholic</Text>
        </Description>
        <Source>
          <Actor>
            <ActorID>AA0002</ActorID>
          </Actor>
        </Source>
      </SocialHistoryElement>
      <SocialHistoryElement>
        <CCRDataObjectID>BB0015</CCRDataObjectID>
        <Type>
          <Text>Pregnancies</Text>
        </Type>
        <Description>
          <Text>4</Text>
        </Description>
        <Source>
          <Actor>
            <ActorID>AA0002</ActorID>
          </Actor>
        </Source>
      </SocialHistoryElement>
      <SocialHistoryElement>
        <CCRDataObjectID>BB0016</CCRDataObjectID>
        <Type>
          <Text>Term Pregnancies</Text>
        </Type>
        <Description>
          <Text>3</Text>
        </Description>
        <Source>
          <Actor>
            <ActorID>AA0002</ActorID>
          </Actor>
        </Source>
      </SocialHistoryElement>
      <SocialHistoryElement>
        <CCRDataObjectID>BB0017</CCRDataObjectID>
        <Type>
          <Text>Pre-term Pregnancies</Text>
        </Type>
        <Description>
          <Text>1</Text>
        </Description>
        <Source>
          <Actor>
            <ActorID>AA0002</ActorID>
          </Actor>
        </Source>
      </SocialHistoryElement>
      <SocialHistoryElement>
        <CCRDataObjectID>BB0018</CCRDataObjectID>
        <Type>
          <Text>Birth History</Text>
        </Type>
        <Description>
          <Text>Nvdx3</Text>
        </Description>
        <Source>
          <Actor>
            <ActorID>AA0002</ActorID>
          </Actor>
        </Source>
      </SocialHistoryElement>
      <SocialHistoryElement>
        <CCRDataObjectID>BB0019</CCRDataObjectID>
        <Type>
          <Text>Employment</Text>
        </Type>
        <Description>
          <Text>Full-time</Text>
        </Description>
        <Source>
          <Actor>
            <ActorID>AA0002</ActorID>
          </Actor>
        </Source>
        <InternalCCRLink>
          <LinkID>AA0013</LinkID>
          <LinkRelationship>Employer</LinkRelationship>
        </InternalCCRLink>
      </SocialHistoryElement>
      <SocialHistoryElement>
        <CCRDataObjectID>BB0020</CCRDataObjectID>
        <DateTime>
          <Type>
            <Text>Date of Onset</Text>
          </Type>
          <Age>
            <Value>19</Value>
            <Units>
              <Unit>Years</Unit>
            </Units>
          </Age>
        </DateTime>
        <Type>
          <Text>Tobacco Use</Text>
        </Type>
        <Description>
          <Text>
          </Text>
          <ObjectAttribute>
            <Attribute>Type</Attribute>
            <AttributeValue>
              <Value>Cigarettes</Value>
            </AttributeValue>
          </ObjectAttribute>
          <ObjectAttribute>
            <Attribute>Frequency</Attribute>
            <AttributeValue>
              <Value>1 pack / day</Value>
            </AttributeValue>
          </ObjectAttribute>
        </Description>
        <Status>
          <Text>Current</Text>
        </Status>
        <Source>
          <Actor>
            <ActorID>AA0006</ActorID>
          </Actor>
        </Source>
      </SocialHistoryElement>
    </SocialHistory>
    <Alerts>
      <Alert>
        <CCRDataObjectID>BB0021</CCRDataObjectID>
        <DateTime>
          <Type>
            <Text>Initial Occurrence</Text>
          </Type>
          <ExactDateTime>1970-01-15T05:00:00Z</ExactDateTime>
        </DateTime>
        <Type>
          <Text>Allergy</Text>
        </Type>
        <Description>
          <Text>Penicillins</Text>
          <Code>
            <Value>245</Value>
            <CodingSystem>FDB Allergy</CodingSystem>
            <Version>2005</Version>
          </Code>
        </Description>
        <Status>
          <Text>Current</Text>
        </Status>
        <Source>
          <Actor>
            <ActorID>AA0006</ActorID>
          </Actor>
        </Source>
        <Agent>
          <Products>
            <Product>
              <CCRDataObjectID>BB0022</CCRDataObjectID>
              <Description>
                <Text>Penicillins</Text>
              </Description>
              <Source>
                <Actor>
                  <ActorID>AA0006</ActorID>
                </Actor>
              </Source>
              <Product>
                <ProductName>
                  <Text>Penicillins</Text>
                </ProductName>
              </Product>
            </Product>
          </Products>
        </Agent>
        <Reaction>
          <Description>
            <Text>Rash/Eruption</Text>
          </Description>
          <Severity>
            <Text>Severe</Text>
          </Severity>
        </Reaction>
      </Alert>
      <Alert>
        <CCRDataObjectID>BB0023</CCRDataObjectID>
        <DateTime>
          <Type>
            <Text>Initial Occurrence</Text>
          </Type>
          <ExactDateTime>2005-03-29T05:00:00Z</ExactDateTime>
        </DateTime>
        <Type>
          <Text>Allergy</Text>
        </Type>
        <Description>
          <Text>Sulfa (Sulfonamides)</Text>
          <Code>
            <Value>305</Value>
            <CodingSystem>FDB Allergy</CodingSystem>
            <Version>2005</Version>
          </Code>
        </Description>
        <Status>
          <Text>Current</Text>
        </Status>
        <Source>
          <Actor>
            <ActorID>AA0002</ActorID>
          </Actor>
        </Source>
        <Agent>
          <Products>
            <Product>
              <CCRDataObjectID>BB0024</CCRDataObjectID>
              <Description>
                <Text>Sulfa (Sulfonamides)</Text>
              </Description>
              <Source>
                <Actor>
                  <ActorID>AA0002</ActorID>
                </Actor>
              </Source>
              <Product>
                <ProductName>
                  <Text>Sulfa (Sulfonamides)</Text>
                </ProductName>
              </Product>
            </Product>
          </Products>
        </Agent>
        <Reaction>
          <Description>
            <Text>Fever</Text>
          </Description>
          <Severity>
            <Text>Moderate</Text>
          </Severity>
        </Reaction>
      </Alert>
      <Alert>
        <CCRDataObjectID>BB0025</CCRDataObjectID>
        <DateTime>
          <Type>
            <Text>Initial Occurrence</Text>
          </Type>
          <ApproximateDateTime>
            <Text>2 years ago</Text>
          </ApproximateDateTime>
        </DateTime>
        <Type>
          <Text>Allergy</Text>
        </Type>
        <Description>
          <Text>Ragweed</Text>
          <Code>
            <Value>152</Value>
            <CodingSystem>e-MDs Allergy</CodingSystem>
            <Version>2005</Version>
          </Code>
        </Description>
        <Status>
          <Text>Current</Text>
        </Status>
        <Source>
          <Actor>
            <ActorID>AA0006</ActorID>
          </Actor>
        </Source>
        <Agent>
          <Products>
            <Product>
              <CCRDataObjectID>BB0026</CCRDataObjectID>
              <Description>
                <Text>Ragweed</Text>
              </Description>
              <Source>
                <Actor>
                  <ActorID>AA0006</ActorID>
                </Actor>
              </Source>
              <Product>
                <ProductName>
                  <Text>Ragweed</Text>
                </ProductName>
              </Product>
            </Product>
          </Products>
        </Agent>
        <Reaction>
          <Description>
            <Text>Congestion</Text>
          </Description>
          <Severity>
            <Text>Mild</Text>
          </Severity>
        </Reaction>
      </Alert>
    </Alerts>
    <Medications>
      <Medication>
        <CCRDataObjectID>BB0027</CCRDataObjectID>
        <DateTime>
          <Type>
            <Text>Prescription Date</Text>
          </Type>
          <ExactDateTime>2005-03-29T05:00:00Z</ExactDateTime>
        </DateTime>
        <Type>
          <Text>Medication</Text>
        </Type>
        <Status>
          <Text>Active</Text>
        </Status>
        <Source>
          <Actor>
            <ActorID>AA0002</ActorID>
          </Actor>
        </Source>
        <Product>
          <ProductName>
            <Text>metformin</Text>
          </ProductName>
          <BrandName>
            <Text>Glucophage XR</Text>
            <Code>
              <Value>00087606313</Value>
              <CodingSystem>NDC</CodingSystem>
              <Version>2005</Version>
            </Code>
          </BrandName>
          <Strength>
            <Value>500</Value>
            <Units>
              <Unit>mg </Unit>
            </Units>
          </Strength>
          <Form>
            <Text>tablet, extended release</Text>
          </Form>
        </Product>
        <Quantity>
          <Value>100</Value>
          <Units>
            <Unit>tablet</Unit>
          </Units>
        </Quantity>
        <Directions>
          <Direction>
            <Dose>
              <Value>1</Value>
              <Units>
                <Unit>tablet</Unit>
              </Units>
            </Dose>
            <Route>
              <Text>PO</Text>
            </Route>
            <Frequency>
              <Value>bid</Value>
            </Frequency>
            <Indication>
              <Source />
              <InternalCCRLink>
                <LinkID>BB0007</LinkID>
              </InternalCCRLink>
            </Indication>
          </Direction>
        </Directions>
        <PatientInstructions>
          <Instruction>
            <Text>Hold dose if patient becomes markedly light headed.</Text>
          </Instruction>
        </PatientInstructions>
        <Refills>
          <Refill>
            <Number>0</Number>
          </Refill>
        </Refills>
      </Medication>
      <Medication>
        <CCRDataObjectID>BB0028</CCRDataObjectID>
        <DateTime>
          <Type>
            <Text>Prescription Date</Text>
          </Type>
          <ExactDateTime>2005-07-22T04:00:00Z</ExactDateTime>
        </DateTime>
        <Type>
          <Text>Medication</Text>
        </Type>
        <Status>
          <Text>Active</Text>
        </Status>
        <Source>
          <Actor>
            <ActorID>AA0002</ActorID>
          </Actor>
        </Source>
        <Product>
          <ProductName>
            <Text>ezetimibe-simvastatin</Text>
          </ProductName>
          <BrandName>
            <Text>Vytorin</Text>
            <Code>
              <Value>66582031231</Value>
              <CodingSystem>NDC</CodingSystem>
              <Version>2005</Version>
            </Code>
          </BrandName>
          <Strength>
            <Value>10</Value>
            <Units>
              <Unit>mg</Unit>
            </Units>
          </Strength>
          <Strength>
            <Value>20</Value>
            <Units>
              <Unit>mg</Unit>
            </Units>
          </Strength>
          <Form>
            <Text>tablet</Text>
          </Form>
        </Product>
        <Quantity>
          <Value>50</Value>
          <Units>
            <Unit>tablet</Unit>
          </Units>
        </Quantity>
        <Directions>
          <Direction>
            <Dose>
              <Value>1</Value>
              <Units>
                <Unit>tablet</Unit>
              </Units>
            </Dose>
            <Route>
              <Text>PO</Text>
            </Route>
            <Frequency>
              <Value>bid</Value>
            </Frequency>
            <Indication>
              <Source />
              <InternalCCRLink>
                <LinkID>BB0006</LinkID>
              </InternalCCRLink>
            </Indication>
          </Direction>
        </Directions>
        <Refills>
          <Refill>
            <Number>0</Number>
          </Refill>
        </Refills>
      </Medication>
      <Medication>
        <CCRDataObjectID>BB0029</CCRDataObjectID>
        <DateTime>
          <Type>
            <Text>Prescription Date</Text>
          </Type>
          <ExactDateTime>2005-10-29T04:00:00Z</ExactDateTime>
        </DateTime>
        <Type>
          <Text>Medication</Text>
        </Type>
        <Status>
          <Text>Active</Text>
        </Status>
        <Source>
          <Actor>
            <ActorID>AA0002</ActorID>
          </Actor>
        </Source>
        <Product>
          <ProductName>
            <Text>insulin lispro</Text>
          </ProductName>
          <BrandName>
            <Text>Humalog</Text>
            <Code>
              <Value>00002751001</Value>
              <CodingSystem>NDC</CodingSystem>
              <Version>2005</Version>
            </Code>
          </BrandName>
          <Strength>
            <Value>100</Value>
            <Units>
              <Unit>units/mL</Unit>
            </Units>
          </Strength>
          <Form>
            <Text>injection</Text>
          </Form>
        </Product>
        <Quantity>
          <Value>100</Value>
          <Units>
            <Unit>injection</Unit>
          </Units>
        </Quantity>
        <Directions>
          <Direction>
            <Dose>
              <Value>0</Value>
              <Units>
                <Unit>unit</Unit>
              </Units>
            </Dose>
            <Route>
              <Text>SC</Text>
            </Route>
            <Indication>
              <Source />
              <InternalCCRLink>
                <LinkID>BB0007</LinkID>
              </InternalCCRLink>
            </Indication>
            <DirectionSequencePosition>1</DirectionSequencePosition>
            <MultipleDirectionModifier>
              <Text>OR</Text>
              <ObjectAttribute>
                <Attribute>SIG Specifier</Attribute>
                <AttributeValue>
                  <Value>FBS&lt;80</Value>
                </AttributeValue>
              </ObjectAttribute>
            </MultipleDirectionModifier>
          </Direction>
          <Direction>
            <Dose>
              <Value>1</Value>
              <Units>
                <Unit>unit</Unit>
              </Units>
            </Dose>
            <Route>
              <Text>SC</Text>
            </Route>
            <Frequency>
              <Value>ac</Value>
            </Frequency>
            <Indication>
              <Source />
              <InternalCCRLink>
                <LinkID>BB0007</LinkID>
              </InternalCCRLink>
            </Indication>
            <DirectionSequencePosition>2</DirectionSequencePosition>
            <MultipleDirectionModifier>
              <Text>OR</Text>
              <ObjectAttribute>
                <Attribute>SIG Specifier</Attribute>
                <AttributeValue>
                  <Value>FBS 80-120</Value>
                </AttributeValue>
              </ObjectAttribute>
            </MultipleDirectionModifier>
          </Direction>
          <Direction>
            <Dose>
              <Value>2</Value>
              <Units>
                <Unit>unit</Unit>
              </Units>
            </Dose>
            <Route>
              <Text>SC</Text>
            </Route>
            <Frequency>
              <Value>ac</Value>
            </Frequency>
            <Indication>
              <Source />
              <InternalCCRLink>
                <LinkID>BB0007</LinkID>
              </InternalCCRLink>
            </Indication>
            <DirectionSequencePosition>3</DirectionSequencePosition>
            <MultipleDirectionModifier>
              <Text>OR</Text>
              <ObjectAttribute>
                <Attribute>SIG Specifier</Attribute>
                <AttributeValue>
                  <Value>FBS 121-160</Value>
                </AttributeValue>
              </ObjectAttribute>
            </MultipleDirectionModifier>
          </Direction>
          <Direction>
            <Dose>
              <Value>3</Value>
              <Units>
                <Unit>unit</Unit>
              </Units>
            </Dose>
            <Route>
              <Text>SC</Text>
            </Route>
            <Frequency>
              <Value>ac</Value>
            </Frequency>
            <Indication>
              <Source />
              <InternalCCRLink>
                <LinkID>BB0007</LinkID>
              </InternalCCRLink>
            </Indication>
            <DirectionSequencePosition>4</DirectionSequencePosition>
            <MultipleDirectionModifier>
              <Text>OR</Text>
              <ObjectAttribute>
                <Attribute>SIG Specifier</Attribute>
                <AttributeValue>
                  <Value>FBS 161-200</Value>
                </AttributeValue>
              </ObjectAttribute>
            </MultipleDirectionModifier>
          </Direction>
          <Direction>
            <Dose>
              <Value>4</Value>
              <Units>
                <Unit>unit</Unit>
              </Units>
            </Dose>
            <Route>
              <Text>SC</Text>
            </Route>
            <Frequency>
              <Value>ac</Value>
            </Frequency>
            <Indication>
              <Source />
              <InternalCCRLink>
                <LinkID>BB0007</LinkID>
              </InternalCCRLink>
            </Indication>
            <DirectionSequencePosition>5</DirectionSequencePosition>
            <MultipleDirectionModifier>
              <Text>OR</Text>
              <ObjectAttribute>
                <Attribute>SIG Specifier</Attribute>
                <AttributeValue>
                  <Value>FBS 201-250</Value>
                </AttributeValue>
              </ObjectAttribute>
            </MultipleDirectionModifier>
          </Direction>
          <Direction>
            <Dose>
              <Value>5</Value>
              <Units>
                <Unit>unit</Unit>
              </Units>
            </Dose>
            <Route>
              <Text>SC</Text>
            </Route>
            <Frequency>
              <Value>ac</Value>
            </Frequency>
            <Indication>
              <Source />
              <InternalCCRLink>
                <LinkID>BB0007</LinkID>
              </InternalCCRLink>
            </Indication>
            <DirectionSequencePosition>6</DirectionSequencePosition>
            <MultipleDirectionModifier>
              <Text>OR</Text>
              <ObjectAttribute>
                <Attribute>SIG Specifier</Attribute>
                <AttributeValue>
                  <Value>FBS 251-300</Value>
                </AttributeValue>
              </ObjectAttribute>
            </MultipleDirectionModifier>
          </Direction>
          <Direction>
            <Dose>
              <Value>6</Value>
              <Units>
                <Unit>unit</Unit>
              </Units>
            </Dose>
            <Route>
              <Text>SC</Text>
            </Route>
            <Frequency>
              <Value>ac</Value>
            </Frequency>
            <Indication>
              <Source />
              <InternalCCRLink>
                <LinkID>BB0007</LinkID>
              </InternalCCRLink>
            </Indication>
          </Direction>
        </Directions>
        <Refills>
          <Refill>
            <Number>0</Number>
          </Refill>
        </Refills>
      </Medication>
      <Medication>
        <CCRDataObjectID>BB0030</CCRDataObjectID>
        <DateTime>
          <Type>
            <Text>Prescription Date</Text>
          </Type>
          <ExactDateTime>2005-10-29T04:00:00Z</ExactDateTime>
        </DateTime>
        <Type>
          <Text>Medication</Text>
        </Type>
        <Status>
          <Text>Active</Text>
        </Status>
        <Source>
          <Actor>
            <ActorID>AA0002</ActorID>
          </Actor>
        </Source>
        <Product>
          <ProductName>
            <Text>predniSONE</Text>
          </ProductName>
          <BrandName>
            <Text>PredniSONE</Text>
            <Code>
              <Value>00054474125</Value>
              <CodingSystem>NDC</CodingSystem>
              <Version>2005</Version>
            </Code>
          </BrandName>
          <Strength>
            <Value>1</Value>
            <Units>
              <Unit>mg</Unit>
            </Units>
          </Strength>
          <Form>
            <Text>tablet</Text>
          </Form>
        </Product>
        <Quantity>
          <Value>15</Value>
          <Units>
            <Unit>tablet</Unit>
          </Units>
        </Quantity>
        <Directions>
          <Direction>
            <Dose>
              <Value>5</Value>
              <Units>
                <Unit>tablet</Unit>
              </Units>
            </Dose>
            <Route>
              <Text>PO</Text>
            </Route>
            <Frequency>
              <Value>qd</Value>
            </Frequency>
            <Duration>
              <Value>1</Value>
              <Units>
                <Unit>Days</Unit>
              </Units>
            </Duration>
            <DirectionSequencePosition>1</DirectionSequencePosition>
            <MultipleDirectionModifier>
              <Text>THEN</Text>
            </MultipleDirectionModifier>
          </Direction>
          <Direction>
            <Dose>
              <Value>4</Value>
              <Units>
                <Unit>tablet</Unit>
              </Units>
            </Dose>
            <Route>
              <Text>PO</Text>
            </Route>
            <Frequency>
              <Value>qd</Value>
            </Frequency>
            <Duration>
              <Value>1</Value>
              <Units>
                <Unit>Days</Unit>
              </Units>
            </Duration>
            <DirectionSequencePosition>2</DirectionSequencePosition>
            <MultipleDirectionModifier>
              <Text>THEN</Text>
            </MultipleDirectionModifier>
          </Direction>
          <Direction>
            <Dose>
              <Value>3</Value>
              <Units>
                <Unit>tablet</Unit>
              </Units>
            </Dose>
            <Route>
              <Text>PO</Text>
            </Route>
            <Frequency>
              <Value>qd</Value>
            </Frequency>
            <Duration>
              <Value>1</Value>
              <Units>
                <Unit>Days</Unit>
              </Units>
            </Duration>
            <DirectionSequencePosition>3</DirectionSequencePosition>
            <MultipleDirectionModifier>
              <Text>THEN</Text>
            </MultipleDirectionModifier>
          </Direction>
          <Direction>
            <Dose>
              <Value>2</Value>
              <Units>
                <Unit>tablet</Unit>
              </Units>
            </Dose>
            <Route>
              <Text>PO</Text>
            </Route>
            <Frequency>
              <Value>qd</Value>
            </Frequency>
            <Duration>
              <Value>1</Value>
              <Units>
                <Unit>Days</Unit>
              </Units>
            </Duration>
            <DirectionSequencePosition>4</DirectionSequencePosition>
            <MultipleDirectionModifier>
              <Text>THEN</Text>
            </MultipleDirectionModifier>
          </Direction>
          <Direction>
            <Dose>
              <Value>1</Value>
              <Units>
                <Unit>tablet</Unit>
              </Units>
            </Dose>
            <Route>
              <Text>PO</Text>
            </Route>
            <Frequency>
              <Value>qd</Value>
            </Frequency>
            <Duration>
              <Value>1</Value>
              <Units>
                <Unit>Days</Unit>
              </Units>
            </Duration>
          </Direction>
        </Directions>
        <Refills>
          <Refill>
            <Number>0</Number>
          </Refill>
        </Refills>
      </Medication>
      <Medication>
        <CCRDataObjectID>BB0031</CCRDataObjectID>
        <DateTime>
          <Type>
            <Text>Prescription Date</Text>
          </Type>
          <ExactDateTime>2005-10-29T04:00:00Z</ExactDateTime>
        </DateTime>
        <Type>
          <Text>Medication</Text>
        </Type>
        <Status>
          <Text>Active</Text>
        </Status>
        <Source>
          <Actor>
            <ActorID>AA0002</ActorID>
          </Actor>
        </Source>
        <Product>
          <ProductName>
            <Text>nafcillin</Text>
          </ProductName>
          <BrandName>
            <Text>Nafcillin Sodium</Text>
            <Code>
              <Value>00338101741</Value>
              <CodingSystem>NDC</CodingSystem>
              <Version>2005</Version>
            </Code>
          </BrandName>
          <Strength>
            <Value>1</Value>
            <Units>
              <Unit>g/50 mL</Unit>
            </Units>
          </Strength>
          <Form>
            <Text>solution</Text>
          </Form>
        </Product>
        <Quantity>
          <Value>1</Value>
        </Quantity>
        <Directions>
          <Direction>
            <Dose>
              <Value>100</Value>
              <Units>
                <Unit>ml</Unit>
              </Units>
            </Dose>
            <Route>
              <Text>IVPB</Text>
            </Route>
            <Frequency>
              <Value>q4h</Value>
            </Frequency>
          </Direction>
        </Directions>
        <Refills>
          <Refill>
            <Number>0</Number>
          </Refill>
        </Refills>
      </Medication>
      <Medication>
        <CCRDataObjectID>BB0032</CCRDataObjectID>
        <DateTime>
          <Type>
            <Text>Prescription Date</Text>
          </Type>
          <ExactDateTime>2005-10-29T04:00:00Z</ExactDateTime>
        </DateTime>
        <Type>
          <Text>Medication</Text>
        </Type>
        <Status>
          <Text>Active</Text>
        </Status>
        <Source>
          <Actor>
            <ActorID>AA0002</ActorID>
          </Actor>
        </Source>
        <Product>
          <ProductName>
            <Text>influenza virus vaccine, live, trivalent</Text>
          </ProductName>
          <BrandName>
            <Text>FluMist</Text>
            <Code>
              <Value>66019010001</Value>
              <CodingSystem>NDC</CodingSystem>
              <Version>2005</Version>
            </Code>
          </BrandName>
          <Strength>
            <Value>
            </Value>
          </Strength>
          <Strength>
            <Value>
            </Value>
          </Strength>
          <Form>
            <Text>spray</Text>
          </Form>
        </Product>
        <Quantity>
          <Value>1</Value>
          <Units>
            <Unit>spray</Unit>
          </Units>
        </Quantity>
        <Directions>
          <Direction>
            <Dose>
              <Value>1</Value>
              <Units>
                <Unit>spray</Unit>
              </Units>
            </Dose>
            <Route>
              <Text>NAS</Text>
            </Route>
          </Direction>
        </Directions>
        <Refills>
          <Refill>
            <Number>0</Number>
          </Refill>
        </Refills>
      </Medication>
    </Medications>
    <Immunizations>
      <Immunization>
        <CCRDataObjectID>BB0033</CCRDataObjectID>
        <DateTime>
          <Type>
            <Text>Immunization Date</Text>
          </Type>
          <ExactDateTime>2005-09-22T04:00:00Z</ExactDateTime>
        </DateTime>
        <Type>
          <Text>Immunization</Text>
        </Type>
        <Source>
          <Actor>
            <ActorID>AA0006</ActorID>
          </Actor>
        </Source>
        <Product>
          <ProductName>
            <Text>Influenza</Text>
            <Code>
              <Value>15</Value>
              <CodingSystem>CVX</CodingSystem>
              <Version>2005</Version>
            </Code>
          </ProductName>
          <Form>
            <Text>Split virus, 6-35 mo. dosage</Text>
          </Form>
        </Product>
        <Directions>
          <Direction>
            <Route>
              <Text>ID</Text>
            </Route>
            <Site>
              <Text>Left arm</Text>
            </Site>
          </Direction>
        </Directions>
      </Immunization>
    </Immunizations>
    <VitalSigns>
      <Result>
        <CCRDataObjectID>BB0034</CCRDataObjectID>
        <DateTime>
          <Type>
            <Text>Assessment Time</Text>
          </Type>
          <ExactDateTime>2005-09-24T04:00:00Z</ExactDateTime>
        </DateTime>
        <Description>
          <Text>Height &amp; Weight</Text>
        </Description>
        <Source>
          <Actor>
            <ActorID>AA0006</ActorID>
          </Actor>
        </Source>
        <Test>
          <CCRDataObjectID>BB0035</CCRDataObjectID>
          <Type>
            <Text>Observation</Text>
          </Type>
          <Description>
            <Text>Height</Text>
            <Code>
              <Value>50373000</Value>
              <CodingSystem>SNOMED</CodingSystem>
              <Version>2005</Version>
            </Code>
          </Description>
          <Source>
            <Actor>
              <ActorID>AA0002</ActorID>
            </Actor>
          </Source>
          <TestResult>
            <Value>155</Value>
            <Units>
              <Unit>cm</Unit>
            </Units>
          </TestResult>
        </Test>
        <Test>
          <CCRDataObjectID>BB0036</CCRDataObjectID>
          <Type>
            <Text>Observation</Text>
          </Type>
          <Description>
            <Text>Weight</Text>
            <Code>
              <Value>363808001</Value>
              <CodingSystem>SNOMED</CodingSystem>
              <Version>2005</Version>
            </Code>
          </Description>
          <Source>
            <Actor>
              <ActorID>AA0002</ActorID>
            </Actor>
          </Source>
          <TestResult>
            <Value>55</Value>
            <Units>
              <Unit>kg</Unit>
            </Units>
          </TestResult>
        </Test>
      </Result>
      <Result>
        <CCRDataObjectID>BB0037</CCRDataObjectID>
        <DateTime>
          <Type>
            <Text>Assessment Time</Text>
          </Type>
          <ExactDateTime>2005-09-24T04:00:00Z</ExactDateTime>
        </DateTime>
        <Description>
          <Text>Cardiac Monitoring</Text>
        </Description>
        <Source>
          <Actor>
            <ActorID>AA0006</ActorID>
          </Actor>
        </Source>
        <Test>
          <CCRDataObjectID>BB0038</CCRDataObjectID>
          <Type>
            <Text>Result</Text>
          </Type>
          <Description>
            <Text>Heart Rate</Text>
            <Code>
              <Value>364075005</Value>
              <CodingSystem>SNOMED</CodingSystem>
              <Version>2005</Version>
            </Code>
          </Description>
          <Source>
            <Actor>
              <ActorID>AA0002</ActorID>
            </Actor>
          </Source>
          <TestResult>
            <Value>73</Value>
            <Units>
              <Unit>/min</Unit>
            </Units>
          </TestResult>
        </Test>
      </Result>
      <Result>
        <CCRDataObjectID>BB0039</CCRDataObjectID>
        <DateTime>
          <Type>
            <Text>Assessment Time</Text>
          </Type>
          <ExactDateTime>2005-09-24T04:00:00Z</ExactDateTime>
        </DateTime>
        <Description>
          <Text>Blood Pressure</Text>
        </Description>
        <Source>
          <Actor>
            <ActorID>AA0006</ActorID>
          </Actor>
        </Source>
        <Test>
          <CCRDataObjectID>BB0040</CCRDataObjectID>
          <Type>
            <Text>Result</Text>
          </Type>
          <Description>
            <Text>Systolic</Text>
            <Code>
              <Value>271649006</Value>
              <CodingSystem>SNOMED</CodingSystem>
              <Version>2005</Version>
            </Code>
          </Description>
          <Source>
            <Actor>
              <ActorID>AA0002</ActorID>
            </Actor>
          </Source>
          <TestResult>
            <Value>130</Value>
            <Units>
              <Unit>mm Hg</Unit>
            </Units>
          </TestResult>
        </Test>
        <Test>
          <CCRDataObjectID>BB0041</CCRDataObjectID>
          <Type>
            <Text>Result</Text>
          </Type>
          <Description>
            <Text>Diastolic</Text>
            <Code>
              <Value>271650006</Value>
              <CodingSystem>SNOMED</CodingSystem>
              <Version>2005</Version>
            </Code>
          </Description>
          <Source>
            <Actor>
              <ActorID>AA0002</ActorID>
            </Actor>
          </Source>
          <TestResult>
            <Value>90</Value>
            <Units>
              <Unit>mm Hg</Unit>
            </Units>
          </TestResult>
        </Test>
      </Result>
      <Result>
        <CCRDataObjectID>BB0042</CCRDataObjectID>
        <DateTime>
          <Type>
            <Text>Assessment Time</Text>
          </Type>
          <ExactDateTime>2005-09-24T04:00:00Z</ExactDateTime>
        </DateTime>
        <Description>
          <Text>Respiratory Rate</Text>
        </Description>
        <Source>
          <Actor>
            <ActorID>AA0006</ActorID>
          </Actor>
        </Source>
        <Test>
          <CCRDataObjectID>BB0043</CCRDataObjectID>
          <Type>
            <Text>Result</Text>
          </Type>
          <Description>
            <Text>Respiratory Rate</Text>
            <Code>
              <Value>86290005</Value>
              <CodingSystem>SNOMED</CodingSystem>
              <Version>2005</Version>
            </Code>
          </Description>
          <Source>
            <Actor>
              <ActorID>AA0002</ActorID>
            </Actor>
          </Source>
          <TestResult>
            <Value>23</Value>
            <Units>
              <Unit>/min</Unit>
            </Units>
          </TestResult>
        </Test>
      </Result>
    </VitalSigns>
    <Results>
      <Result>
        <CCRDataObjectID>BB0044</CCRDataObjectID>
        <Description>
          <Text>Ob/Gyn Observations</Text>
        </Description>
        <Source>
          <Actor>
            <ActorID>AA0002</ActorID>
          </Actor>
        </Source>
        <Test>
          <CCRDataObjectID>BB0045</CCRDataObjectID>
          <Type>
            <Text>Observation</Text>
          </Type>
          <Description>
            <Text>Pregnancy State</Text>
          </Description>
          <Source>
            <Actor>
              <ActorID>AA0002</ActorID>
            </Actor>
          </Source>
          <TestResult>
            <Value>No</Value>
          </TestResult>
        </Test>
        <Test>
          <CCRDataObjectID>BB0046</CCRDataObjectID>
          <DateTime>
            <ExactDateTime>2005-09-13</ExactDateTime>
          </DateTime>
          <Type>
            <Text>Observation</Text>
          </Type>
          <Description>
            <Text>LMP</Text>
          </Description>
          <Source>
            <Actor>
              <ActorID>AA0002</ActorID>
            </Actor>
          </Source>
          <TestResult>
            <Value>9/13/2005</Value>
          </TestResult>
        </Test>
      </Result>
      <Result>
        <CCRDataObjectID>BB0047</CCRDataObjectID>
        <DateTime>
          <Type>
            <Text>Assessment Time</Text>
          </Type>
          <ExactDateTime>2003-12-08T05:00:00Z</ExactDateTime>
        </DateTime>
        <Description>
          <Text>Complete cbc w/auto diff wbc</Text>
        </Description>
        <Source>
          <Actor>
            <ActorID>AA0008</ActorID>
          </Actor>
        </Source>
        <Test>
          <CCRDataObjectID>BB0048</CCRDataObjectID>
          <Type>
            <Text>Result</Text>
          </Type>
          <Description>
            <Text>Spun microhematocrit</Text>
            <Code>
              <Value>85013</Value>
              <CodingSystem>CPT-4</CodingSystem>
              <Version>2005</Version>
            </Code>
          </Description>
          <Source>
            <Actor>
              <ActorID>AA0002</ActorID>
            </Actor>
          </Source>
          <TestResult>
            <Value>32.6</Value>
            <Units>
              <Unit>L/L</Unit>
            </Units>
          </TestResult>
          <Flag>
            <Text>Abnormal Low</Text>
          </Flag>
        </Test>
        <Test>
          <CCRDataObjectID>BB0049</CCRDataObjectID>
          <Type>
            <Text>Result</Text>
          </Type>
          <Description>
            <Text>plasma hemoglobin</Text>
            <Code>
              <Value>83051</Value>
              <CodingSystem>CPT-4</CodingSystem>
              <Version>2005</Version>
            </Code>
          </Description>
          <Source>
            <Actor>
              <ActorID>AA0002</ActorID>
            </Actor>
          </Source>
          <TestResult>
            <Value>9.6</Value>
            <Units>
              <Unit>G/L</Unit>
            </Units>
          </TestResult>
          <Flag>
            <Text>Abnormal Low</Text>
          </Flag>
        </Test>
        <Test>
          <CCRDataObjectID>BB0050</CCRDataObjectID>
          <Type>
            <Text>Result</Text>
          </Type>
          <Description>
            <Text>Automated leukocyte count</Text>
            <Code>
              <Value>85048</Value>
              <CodingSystem>CPT-4</CodingSystem>
              <Version>2005</Version>
            </Code>
          </Description>
          <Source>
            <Actor>
              <ActorID>AA0002</ActorID>
            </Actor>
          </Source>
          <TestResult>
            <Value>18.5</Value>
            <Units>
              <Unit>10^3/uL</Unit>
            </Units>
          </TestResult>
          <Flag>
            <Text>Abnormal High</Text>
          </Flag>
        </Test>
      </Result>
      <Result>
        <CCRDataObjectID>BB0051</CCRDataObjectID>
        <DateTime>
          <Type>
            <Text>Assessment Time</Text>
          </Type>
          <ExactDateTime>2005-10-29T04:00:00Z</ExactDateTime>
        </DateTime>
        <Description>
          <Text>Urine culture/colony count</Text>
          <Code>
            <Value>87086</Value>
            <CodingSystem>CPT-4</CodingSystem>
            <Version>2005</Version>
          </Code>
        </Description>
        <Source>
          <Actor>
            <ActorID>AA0002</ActorID>
          </Actor>
        </Source>
        <Test>
          <CCRDataObjectID>BB0052</CCRDataObjectID>
          <Type>
            <Text>Result</Text>
          </Type>
          <Description>
            <Text>Urine culture/colony count</Text>
            <Code>
              <Value>87086</Value>
              <CodingSystem>CPT-4</CodingSystem>
              <Version>2005</Version>
            </Code>
          </Description>
          <Source>
            <Actor>
              <ActorID>AA0002</ActorID>
            </Actor>
          </Source>
          <TestResult>
            <Description>
              <Text>&lt;p&gt;&lt;span id="_ctl0_OrderCompletionListControl1_DataListOrders__ctl1_DataListRequestOrders__ctl0_DataGridNondiscreteResultDetail__ctl2_LabelNondiscreteResultReport"&gt;FINAL REPORT *** &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;Culture Results Enterobacter aerogenes - GREATER THAN 100 X 10^6 COLONY FORMING UNITS (CFU)/L *** Sensitivity Results *** Organism :Entero aerogenes ANTIMICROBIAL THERAPEUTIC DOSE MIC BLOOD URINE ----------------------------------------------------------------------&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;AMPICILLIN NC &amp;gt;16 R R GENTAMICIN NC &amp;lt;=4 S S TOBRAMYCIN NC &amp;lt;=4 S S SEPTRA NC &amp;lt;=.5/9.5 S S NITROFURANTOIN NC &amp;lt;=32 S &lt;/span&gt;&lt;/p&gt;</Text>
            </Description>
          </TestResult>
          <Flag>
            <Text>Normal</Text>
          </Flag>
        </Test>
      </Result>
      <Result>
        <CCRDataObjectID>BB0053</CCRDataObjectID>
        <DateTime>
          <Type>
            <Text>Assessment Time</Text>
          </Type>
          <ExactDateTime>2005-10-29T04:00:00Z</ExactDateTime>
        </DateTime>
        <Description>
          <Text>Urinalysis, nonauto w/scope</Text>
          <Code>
            <Value>81000</Value>
            <CodingSystem>CPT-4</CodingSystem>
            <Version>2005</Version>
          </Code>
        </Description>
        <Source>
          <Actor>
            <ActorID>AA0002</ActorID>
          </Actor>
        </Source>
        <Test>
          <CCRDataObjectID>BB0054</CCRDataObjectID>
          <Type>
            <Text>Result</Text>
          </Type>
          <Description>
            <Text>Urine Bilirubin</Text>
          </Description>
          <Source>
            <Actor>
              <ActorID>AA0002</ActorID>
            </Actor>
          </Source>
          <TestResult>
            <Value>Negative</Value>
          </TestResult>
          <Flag>
            <Text>Normal</Text>
          </Flag>
        </Test>
        <Test>
          <CCRDataObjectID>BB0055</CCRDataObjectID>
          <Type>
            <Text>Result</Text>
          </Type>
          <Description>
            <Text>Urine Epithelial</Text>
          </Description>
          <Source>
            <Actor>
              <ActorID>AA0002</ActorID>
            </Actor>
          </Source>
          <TestResult>
            <Value>Few</Value>
          </TestResult>
          <Flag>
            <Text>Normal</Text>
          </Flag>
        </Test>
        <Test>
          <CCRDataObjectID>BB0056</CCRDataObjectID>
          <Type>
            <Text>Result</Text>
          </Type>
          <Description>
            <Text>Bone marrow biopsy</Text>
            <Code>
              <Value>85102</Value>
              <CodingSystem>CPT-4</CodingSystem>
              <Version>2005</Version>
            </Code>
          </Description>
          <Source>
            <Actor>
              <ActorID>AA0002</ActorID>
            </Actor>
          </Source>
          <TestResult>
            <Value>Negative</Value>
          </TestResult>
          <Flag>
            <Text>Normal</Text>
          </Flag>
        </Test>
        <Test>
          <CCRDataObjectID>BB0057</CCRDataObjectID>
          <Type>
            <Text>Result</Text>
          </Type>
          <Description>
            <Text>Urine Protein</Text>
          </Description>
          <Source>
            <Actor>
              <ActorID>AA0002</ActorID>
            </Actor>
          </Source>
          <TestResult>
            <Value>Negative</Value>
          </TestResult>
          <Flag>
            <Text>Normal</Text>
          </Flag>
        </Test>
        <Test>
          <CCRDataObjectID>BB0058</CCRDataObjectID>
          <Type>
            <Text>Result</Text>
          </Type>
          <Description>
            <Text>Urine appearance</Text>
          </Description>
          <Source>
            <Actor>
              <ActorID>AA0002</ActorID>
            </Actor>
          </Source>
          <TestResult>
            <Value>Clear</Value>
          </TestResult>
          <Flag>
            <Text>Normal</Text>
          </Flag>
        </Test>
        <Test>
          <CCRDataObjectID>BB0059</CCRDataObjectID>
          <Type>
            <Text>Result</Text>
          </Type>
          <Description>
            <Text>Color</Text>
          </Description>
          <Source>
            <Actor>
              <ActorID>AA0002</ActorID>
            </Actor>
          </Source>
          <TestResult>
            <Value>Yellow</Value>
          </TestResult>
          <Flag>
            <Text>Normal</Text>
          </Flag>
        </Test>
        <Test>
          <CCRDataObjectID>BB0060</CCRDataObjectID>
          <Type>
            <Text>Result</Text>
          </Type>
          <Description>
            <Text>Specific Gravity</Text>
          </Description>
          <Source>
            <Actor>
              <ActorID>AA0002</ActorID>
            </Actor>
          </Source>
          <TestResult>
            <Value>1.005</Value>
          </TestResult>
          <Flag>
            <Text>Normal</Text>
          </Flag>
        </Test>
        <Test>
          <CCRDataObjectID>BB0061</CCRDataObjectID>
          <Type>
            <Text>Result</Text>
          </Type>
          <Description>
            <Text>URINE PH</Text>
          </Description>
          <Source>
            <Actor>
              <ActorID>AA0002</ActorID>
            </Actor>
          </Source>
          <TestResult>
            <Value>7.00</Value>
          </TestResult>
          <Flag>
            <Text>Normal</Text>
          </Flag>
        </Test>
        <Test>
          <CCRDataObjectID>BB0062</CCRDataObjectID>
          <Type>
            <Text>Result</Text>
          </Type>
          <Description>
            <Text>Urine WBC's</Text>
          </Description>
          <Source>
            <Actor>
              <ActorID>AA0002</ActorID>
            </Actor>
          </Source>
          <TestResult>
            <Value>Few</Value>
          </TestResult>
          <Flag>
            <Text>Normal</Text>
          </Flag>
        </Test>
        <Test>
          <CCRDataObjectID>BB0063</CCRDataObjectID>
          <Type>
            <Text>Result</Text>
          </Type>
          <Description>
            <Text>Urine RBC's</Text>
          </Description>
          <Source>
            <Actor>
              <ActorID>AA0002</ActorID>
            </Actor>
          </Source>
          <TestResult>
            <Value>Few</Value>
          </TestResult>
          <Flag>
            <Text>Normal</Text>
          </Flag>
        </Test>
      </Result>
    </Results>
    <Procedures>
      <Procedure>
        <CCRDataObjectID>BB0064</CCRDataObjectID>
        <DateTime>
          <Type>
            <Text>Procedure Date</Text>
          </Type>
          <ExactDateTime>2005-09-24T04:00:00Z</ExactDateTime>
        </DateTime>
        <Type>
          <Text>Surgical</Text>
        </Type>
        <Description>
          <Text>CABG, arterial, two</Text>
          <Code>
            <Value>33534</Value>
            <CodingSystem>CPT-4</CodingSystem>
            <Version>2005</Version>
          </Code>
        </Description>
        <Source>
          <Actor>
            <ActorID>AA0002</ActorID>
          </Actor>
        </Source>
        <Indications>
          <Indication>
            <Source />
            <InternalCCRLink>
              <LinkID>BB0006</LinkID>
            </InternalCCRLink>
          </Indication>
        </Indications>
      </Procedure>
    </Procedures>
    <Encounters>
      <Encounter>
        <CCRDataObjectID>BB0065</CCRDataObjectID>
        <DateTime>
          <Type>
            <Text>Encounter Date</Text>
          </Type>
          <ExactDateTime>2005-09-24T04:00:00Z</ExactDateTime>
        </DateTime>
        <Type>
          <Text>Emergency</Text>
        </Type>
        <Description>
          <Text>Chest pain</Text>
        </Description>
        <Source>
          <Actor>
            <ActorID>AA0002</ActorID>
          </Actor>
        </Source>
        <Locations>
          <Location>
            <Description>
              <Text>Broward Medical Center</Text>
            </Description>
          </Location>
        </Locations>
        <Practitioners>
          <Practitioner>
            <ActorID>AA0014</ActorID>
            <ActorRole>
              <Text>Practitioner</Text>
            </ActorRole>
          </Practitioner>
        </Practitioners>
        <Indications>
          <Indication>
            <Source />
            <InternalCCRLink>
              <LinkID>BB0006</LinkID>
            </InternalCCRLink>
          </Indication>
        </Indications>
      </Encounter>
      <Encounter>
        <CCRDataObjectID>BB0066</CCRDataObjectID>
        <DateTime>
          <Type>
            <Text>Encounter Date</Text>
          </Type>
          <ExactDateTime>2005-09-05T04:00:00Z</ExactDateTime>
        </DateTime>
        <Type>
          <Text>Outpatient</Text>
        </Type>
        <Description>
          <Text>Chest pain evaluation</Text>
        </Description>
        <Source>
          <Actor>
            <ActorID>AA0002</ActorID>
          </Actor>
        </Source>
        <Locations>
          <Location>
            <Description>
              <Text>CCR Physician Group</Text>
            </Description>
          </Location>
        </Locations>
        <Practitioners>
          <Practitioner>
            <ActorID>AA0005</ActorID>
            <ActorRole>
              <Text>Practitioner</Text>
            </ActorRole>
          </Practitioner>
        </Practitioners>
        <Indications>
          <Indication>
            <Source />
            <InternalCCRLink>
              <LinkID>BB0006</LinkID>
            </InternalCCRLink>
          </Indication>
        </Indications>
      </Encounter>
    </Encounters>
    <PlanOfCare>
      <Plan>
        <CCRDataObjectID>BB0067</CCRDataObjectID>
        <Type>
          <Text>Treatment Recommendation</Text>
        </Type>
        <Description>
          <Text>Diabetic retinal evaluation</Text>
        </Description>
        <Status>
          <Text>In Process</Text>
        </Status>
        <Source>
          <Actor>
            <ActorID>AA0002</ActorID>
          </Actor>
        </Source>
        <OrderRequest>
          <CCRDataObjectID>BB0068</CCRDataObjectID>
          <Description>
            <Text>Patients &amp;gt;10 years of age with type 1 diabetes should have an initial dilated and comprehensive eye examination by an ophthalmologist or optometrist within 3&amp;#8211;5 years after the onset of diabetes. In general, screening for diabetic eye disease is not necessary before 10 years of age. </Text>
          </Description>
          <Source>
            <Actor>
              <ActorID>AA0002</ActorID>
            </Actor>
          </Source>
        </OrderRequest>
      </Plan>
      <Plan>
        <CCRDataObjectID>BB0069</CCRDataObjectID>
        <Type>
          <Text>Order</Text>
        </Type>
        <Description>
          <Text>A1C Monitoring</Text>
        </Description>
        <Status>
          <Text>In Process</Text>
        </Status>
        <Source>
          <Actor>
            <ActorID>AA0002</ActorID>
          </Actor>
        </Source>
        <OrderRequest>
          <CCRDataObjectID>BB0070</CCRDataObjectID>
          <Source>
            <Actor>
              <ActorID>AA0002</ActorID>
            </Actor>
          </Source>
          <Procedures>
            <Procedure>
              <CCRDataObjectID>BB0071</CCRDataObjectID>
              <Type>
                <Text>Lab</Text>
              </Type>
              <Description>
                <Text>Glycated hemoglobin test</Text>
                <Code>
                  <Value>83036</Value>
                  <CodingSystem>CPT-4</CodingSystem>
                  <Version>2005</Version>
                </Code>
              </Description>
              <Source>
                <Actor>
                  <ActorID>AA0002</ActorID>
                </Actor>
              </Source>
              <Interval>
                <Value>8</Value>
                <Units>
                  <Unit>Weeks</Unit>
                </Units>
              </Interval>
              <Duration>
                <Value>52</Value>
                <Units>
                  <Unit>Weeks</Unit>
                </Units>
              </Duration>
              <Indications>
                <Indication>
                  <Source />
                  <InternalCCRLink>
                    <LinkID>BB0007</LinkID>
                  </InternalCCRLink>
                </Indication>
              </Indications>
            </Procedure>
          </Procedures>
        </OrderRequest>
      </Plan>
    </PlanOfCare>
    <HealthCareProviders>
      <Provider>
        <ActorID>AA0015</ActorID>
        <ActorRole>
          <Text>Consulting Provider</Text>
        </ActorRole>
      </Provider>
      <Provider>
        <ActorID>AA0005</ActorID>
        <ActorRole>
          <Text>Consulting Provider</Text>
        </ActorRole>
      </Provider>
      <Provider>
        <ActorID>AA0002</ActorID>
        <ActorRole>
          <Text>Primary Care Provider</Text>
        </ActorRole>
      </Provider>
    </HealthCareProviders>
  </Body>
  <Actors>
    <Actor>
      <ActorObjectID>AA0001</ActorObjectID>
      <Person>
        <Name>
          <CurrentName>
            <Given>Jane</Given>
            <Middle>B</Middle>
            <Family>Hernandez</Family>
          </CurrentName>
        </Name>
        <DateOfBirth>
          <ExactDateTime>1948-01-16T05:00:00Z</ExactDateTime>
        </DateOfBirth>
        <Gender>
          <Text>Female</Text>
        </Gender>
      </Person>
      <IDs>
        <Type>
          <Text>SSN</Text>
        </Type>
        <ID>888-88-8888</ID>
        <Source>
          <Actor>
            <ActorID>AA0002</ActorID>
          </Actor>
        </Source>
      </IDs>
      <Address>
        <Type>
          <Text>Home</Text>
        </Type>
        <Line1>758 Las Olas Dr.</Line1>
        <City>Fort Lauderdale</City>
        <State>FL</State>
        <PostalCode>33011</PostalCode>
      </Address>
      <Source>
        <Actor>
          <ActorID>AA0002</ActorID>
        </Actor>
      </Source>
    </Actor>
    <Actor>
      <ActorObjectID>AA0002</ActorObjectID>
      <Person>
        <Name>
          <CurrentName>
            <Given>Peter</Given>
            <Family>Primary</Family>
          </CurrentName>
          <DisplayName>Dr. Peter Primary</DisplayName>
        </Name>
      </Person>
      <Specialty>
        <Text>Family Practice</Text>
      </Specialty>
      <EMail>
        <Value>ccrfp@hotmail.com</Value>
      </EMail>
      <Source>
        <Actor>
          <ActorID>AA0002</ActorID>
        </Actor>
      </Source>
    </Actor>
    <Actor>
      <ActorObjectID>AA0003</ActorObjectID>
      <Organization>
        <Name>CCR Physician Group</Name>
      </Organization>
      <Source>
        <Actor>
          <ActorID>AA0002</ActorID>
        </Actor>
      </Source>
    </Actor>
    <Actor>
      <ActorObjectID>AA0004</ActorObjectID>
      <InformationSystem>
        <Name>Solventus ViewPort</Name>
        <Version>V1.0</Version>
      </InformationSystem>
      <Source>
        <Actor>
          <ActorID>AA0002</ActorID>
        </Actor>
      </Source>
    </Actor>
    <Actor>
      <ActorObjectID>AA0005</ActorObjectID>
      <Person>
        <Name>
          <CurrentName>
            <Given>Myron</Given>
            <Family>Mitral</Family>
          </CurrentName>
          <DisplayName>Dr. Myron Mitral</DisplayName>
        </Name>
      </Person>
      <Specialty>
        <Text>Cardiology</Text>
      </Specialty>
      <EMail>
        <Value>ccrcardio@hotmail.com</Value>
      </EMail>
      <Source>
        <Actor>
          <ActorID>AA0002</ActorID>
        </Actor>
      </Source>
    </Actor>
    <Actor>
      <ActorObjectID>AA0006</ActorObjectID>
      <Person>
        <Name>
          <CurrentName>
            <Given>John</Given>
            <Family>Gray</Family>
          </CurrentName>
          <DisplayName>Dr. John Gray</DisplayName>
        </Name>
      </Person>
      <Address>
        <Type>
          <Text>Home</Text>
        </Type>
        <Line1>800 E Las Olas Blvd</Line1>
        <City>Fort Lauderdale</City>
        <State>FL</State>
        <PostalCode>33301</PostalCode>
      </Address>
      <Telephone>
        <Value>954-555-1212</Value>
        <Type>
          <Text>Home</Text>
        </Type>
      </Telephone>
      <EMail>
        <Value>ken.miller@solventus.com</Value>
      </EMail>
      <Source>
        <Actor>
          <ActorID>AA0002</ActorID>
        </Actor>
      </Source>
    </Actor>
    <Actor>
      <ActorObjectID>AA0007</ActorObjectID>
      <Organization>
        <Name>Blue Cross Blue Shield of Florida BlueScript</Name>
      </Organization>
      <Source>
        <Actor>
          <ActorID>AA0002</ActorID>
        </Actor>
      </Source>
    </Actor>
    <Actor>
      <ActorObjectID>AA0008</ActorObjectID>
      <Person>
        <Name>
          <CurrentName>
            <Given>Steven</Given>
            <Family>Hernandez</Family>
          </CurrentName>
        </Name>
        <DateOfBirth>
          <ExactDateTime>1968-08-21T04:00:00Z</ExactDateTime>
        </DateOfBirth>
        <Gender>
          <Text>Male</Text>
        </Gender>
      </Person>
      <IDs>
        <Type>
          <Text>SSN</Text>
        </Type>
        <ID>151436167</ID>
        <Source>
          <Actor>
            <ActorID>AA0002</ActorID>
          </Actor>
        </Source>
      </IDs>
      <Source>
        <Actor>
          <ActorID>AA0002</ActorID>
        </Actor>
      </Source>
    </Actor>
    <Actor>
      <ActorObjectID>AA0009</ActorObjectID>
      <Person>
        <Name>
          <CurrentName>
            <Given>John</Given>
            <Middle>Adam</Middle>
            <Family>Smith</Family>
          </CurrentName>
          <DisplayName>Dr. John Smith</DisplayName>
        </Name>
      </Person>
      <Address>
        <Type>
          <Text>Home</Text>
        </Type>
        <Line1>94044 Link Road</Line1>
        <City>San Francisco</City>
        <State>CA</State>
        <PostalCode>94304</PostalCode>
      </Address>
      <Telephone>
        <Value>415-555-1212</Value>
        <Type>
          <Text>Home</Text>
        </Type>
      </Telephone>
      <EMail>
        <Value>jsmith@ccrdemohealthclinic.com</Value>
      </EMail>
      <Source>
        <Actor>
          <ActorID>AA0002</ActorID>
        </Actor>
      </Source>
    </Actor>
    <Actor>
      <ActorObjectID>AA0010</ActorObjectID>
      <Person>
        <Name>
          <CurrentName>
            <Given>John</Given>
            <Family>Rivera</Family>
          </CurrentName>
        </Name>
        <DateOfBirth>
          <ExactDateTime>1965-01-03T05:00:00Z</ExactDateTime>
        </DateOfBirth>
      </Person>
      <Relation>
        <Text>Sibling</Text>
      </Relation>
      <Source>
        <Actor>
          <ActorID>AA0002</ActorID>
        </Actor>
      </Source>
    </Actor>
    <Actor>
      <ActorObjectID>AA0011</ActorObjectID>
      <Person>
        <Name>
          <CurrentName>
            <Given>Rita</Given>
            <Family>Ribera</Family>
          </CurrentName>
        </Name>
      </Person>
      <Address>
        <Type>
          <Text>Home</Text>
        </Type>
        <Line1>1822 McNab Ave</Line1>
        <City>Fort Lauderdale</City>
        <State>FL</State>
        <PostalCode>33072</PostalCode>
      </Address>
      <Source>
        <Actor>
          <ActorID>AA0002</ActorID>
        </Actor>
      </Source>
    </Actor>
    <Actor>
      <ActorObjectID>AA0012</ActorObjectID>
      <Person>
        <Name />
      </Person>
      <Relation>
        <Text>Mother</Text>
      </Relation>
      <Source>
        <Actor>
          <ActorID>AA0002</ActorID>
        </Actor>
      </Source>
    </Actor>
    <Actor>
      <ActorObjectID>AA0013</ActorObjectID>
      <Organization>
        <Name>Acme Corp.</Name>
      </Organization>
      <Address>
        <Type>
          <Text>Main</Text>
        </Type>
        <Line1>2000 N Flagler Dr.</Line1>
        <City>Miami</City>
        <State>FL</State>
        <PostalCode>33044</PostalCode>
      </Address>
      <Source>
        <Actor>
          <ActorID>AA0002</ActorID>
        </Actor>
      </Source>
    </Actor>
    <Actor>
      <ActorObjectID>AA0014</ActorObjectID>
      <Person>
        <Name>
          <CurrentName>
            <Given>Stephen</Given>
            <Family>Goldberg</Family>
          </CurrentName>
        </Name>
      </Person>
      <Source>
        <Actor>
          <ActorID>AA0002</ActorID>
        </Actor>
      </Source>
    </Actor>
    <Actor>
      <ActorObjectID>AA0015</ActorObjectID>
      <Person>
        <Name>
          <CurrentName>
            <Given>Gary</Given>
            <Family>Ganglion</Family>
          </CurrentName>
          <DisplayName>Dr. Gary Ganglion</DisplayName>
        </Name>
      </Person>
      <EMail>
        <Value>ccrneuro@hotmail.com</Value>
      </EMail>
      <Source>
        <Actor>
          <ActorID>AA0002</ActorID>
        </Actor>
      </Source>
    </Actor>
  </Actors>
</ContinuityOfCareRecord>
eos;
    $xml = ClinicalXmls::parse($xml);
    p_r($xml);
    exit;
  case '160':
    $r = CmsReport_NQF0013::from('2010-01-01', '2011-01-01');
    p_r($r);
    p_r($r->scorecard->getPerformanceRate());
    $xml = PQRI::from($r);
    p_r($xml);
    exit;
  case '161':
    $a = array(1, 5, 10, 11);
    $b = array(2, 5, 6);
    $c = array_diff($b, $a);
    p_r($c);
}
function getEncryptKey($c, $pass) {
  $salt = 'lcd solutions'; 
  return $c->pbkdf2($pass, $salt, 1966, 32);
}
?>
</html>

