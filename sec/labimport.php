<?php
require_once 'php/data/LoginSession.php';
require_once 'bat/batch.php';
require_once 'php/data/rest/RestInbound.php';
require_once 'php/data/ftp/FtpFolder.php';
require_once 'php/data/rec/sql/HL7_Labs.php';
require_once 'php/data/hl7/msg/ACKMessage.php';
//
class RestInbound_Lab extends RestInbound {
  //
  static function test() {
    $me = new static();
    $me->username = 'L0090001';
    $me->password = 'STAGING';
    $me->body = <<<eos
MSH|^~\&|LAB|WDL||97502840|20150424132509||ORU^R01|80000000000000272476|D|2.3.1
PID|1||CB020090A||TEST^PARUL8|||||||||||||1235718
ORC|RE|1235718|CB020090A||CM
OBR|1|1235718|CB020090A|17306^VITAMIN D,25-OH,TOTAL,IA^^17306SB=^VITAMIN D,25-OH,TOTAL,IA|||20150424000000|||||||20150424110000|||||||CB^Quest Diagnostics-Wood Dale^1355 Mittel Blvd^Wood Dale^IL^60191-1024^Anthony V Thomas, M.D.|20150424122200|||F
OBX|1|NM|1989-3^25(OH)D3 SerPl-mCnc^LN^55182715^VITAMIN D,25-OH,TOTAL,IA^QDIWDL||15|ng/mL|30-100|L|||F|||20150424122200|CB
NTE|1|| 
NTE|2||25-OHD3 indicates both endogenous production and
NTE|3||supplementation. 25-OHD2 is an indicator of exogenous
NTE|4||sources, such as diet or supplementation. Therapy is
NTE|5||based on measurement of Total 25-OHD, with levels 
NTE|6||<20 ng/mL indicative of Vitamin D deficiency, while 
NTE|7||levels between 20 ng/mL and 30 ng/mL suggest
NTE|8||insufficiency. Optimal levels are > or = 30 ng/mL.
OBR|2|1235718|CB020090A|ClinicalPDFReport1^Clinical PDF Report CB020090A-1^^ClinicalPDFReport1^Clinical PDF Report CB020090A-1|||20150424000000|||||||20150424110000||||||||20150424122200|||F
OBX|1|ED|ClinicalPDFReport1^Clinical PDF Report CB020090A-1^^ClinicalPDFReport1^Clinical PDF Report CB020090A-1||WDL^Image^PDF^Base64^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||||||F
eos;
    return $me;
  }
}
//
$rest = RestInbound_Lab::test();
if (! $rest->hasBody()) {
  RestInbound::setHeader_BadRequest();
  exit;
}
if (! $rest->hasAuth()) {
  RestInbound::setHeader_Unauthorized();
  exit;
}
$lab = Lab::fetch_ByAuth($rest->username, $rest->password);
if ($lab == null) {
  RestInbound::setHeader_Unauthorized();
  exit;
}
HL7_Labs::setVersion('2.3.1');
$msg = LabMessage::fromHL7($rest->body, $lab);
$folder = FtpFolder::from($lab);
$folder->saveToIn($rest->body);
$ack = ACKMessage::fromORU($msg);
echo $ack->toHL7();

